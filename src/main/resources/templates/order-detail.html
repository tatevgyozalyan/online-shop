<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" th:replace="~{base::layout(~{::section})}">
<head>
    <title>Order Detail</title>
    <link rel="stylesheet" th:href="@{/css/styles.css}"/>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<section class="container mt-5">
    <!-- Back Button -->
    <div class="mb-4">
        <a th:href="@{/orders}" class="btn btn-secondary">
            <i class="bi bi-arrow-left"></i> Back to Orders
        </a>
    </div>

    <!-- Order Info -->
    <div class="card shadow-sm p-4 mb-4">
        <h2 class="mb-3">Order Detail</h2>
        <p>Status: <span th:text="${order.status}"></span></p>

        <p>Total: <strong>$<span th:text="${order.total}"></span></strong></p>
    </div>

    <!-- Order Items -->
    <div class="card shadow-sm p-4 mb-4">
        <h4 class="mb-3">Items</h4>
        <ul class="list-group list-group-flush">
            <li class="list-group-item d-flex justify-content-between align-items-center"
                th:each="item : ${order.orderItems}">
                <div>
                    <span th:text="${item.product.name}"></span>
                    <small class="text-muted">x<span th:text="${item.quantity}"></span></small>
                </div>
                <span class="fw-bold">$<span th:text="${item.price}"></span></span>
            </li>
        </ul>
    </div>

    <!-- Pay Now button (only if PENDING) -->
    <div th:if="${order.status == 'PENDING'}" class="mb-4 text-center">
        <a th:href="@{/payment/{id}(id=${order.id})}" class="btn btn-success btn-lg">
            <i class="bi bi-credit-card-fill"></i> Pay Now
        </a>
    </div>
</section>

<!-- Bootstrap Icons -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
</body>
</html>
